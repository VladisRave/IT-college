# Ввод/вывод, преобразование типов и обработка ошибок

## **Краткое повторение тем: обзор ввода/вывода**

### **Функция `input()` - получение данных от пользователя**
```python
name = input("Как тебя зовут? ")  # Всегда возвращает строку!
print("Привет,", name)
```

**Важный момент:** `input()` всегда возвращает строку (`str`), даже если пользователь вводит цифры.

### **Преобразование типов**
Часто используемые функции преобразования:
- `int("20")` → `20` (целое число)
- `float("3.14")` → `3.14` (дробное число)
- `str(42)` → `"42"` (текст)

**Практический пример:**
```python
birth_year = input("Год рождения: ")
age = 2025 - int(birth_year)  # Преобразуем строку в число!
print(f"Тебе {age} лет.")     # Используем f-строку для красивого вывода
```

### **Нюансы вывода с `print()`**
```python
print("Привет", name, "!", sep="---")  # Разделитель: Привет---Анна---!
print("Строка без перевода", end=" ")  # Не переходит на новую строку
print("Продолжение на той же строке")
```
---

Перед тем как начать изучение темы ошибок познакомимся о конструкции try-except
Представьте, что вы пытаетесь выполнить какое-то действие, которое может закончиться неудачей. Конструкция `try-except` — это как план действий на такой случай.

## Try (Попробовать) — основное действие

```python
try:
    # Здесь мы пытаемся сделать что-то, что может не получиться
    # Например, открыть файл, подключиться к интернету, разделить числа
```

**Простая аналогия:** Вы пытаетесь налить себе сок из пакета.

## Except (Исключение) — что делать, если не получилось

```python
except:
    # Сюда мы попадаем, если в блоке try что-то пошло не так
    # Здесь мы обрабатываем ошибку
```

**Простая аналогия:** Если вы пролили сок, вы берете тряпку и вытираете лужу.

## Else (Иначе) — что делать, если всё получилось

```python
else:
    # Сюда мы попадаем, если в блоке try всё прошло успешно
    # И не произошло никаких ошибок
```

**Простая аналогия:** Если вы успешно налили сок, вы говорите "Отлично!" и пьёте его.

## Finally (В конечном счете) — что делать в любом случае

```python
finally:
    # Этот блок выполнится ВСЕГДА
    # Неважно, была ошибка или нет
```

**Простая аналогия:** Независимо от того, пролили вы сок или нет, вы всегда убираете пакет сока обратно в холодильник.

---

## Полный пример из жизни

Давайте представим ситуацию: вы пытаетесь купить билеты онлайн.

```python
try:
    # Пытаемся купить билеты (основное действие)
    купить_билеты()
    
except КартаОтклонена:
    # Если карта не сработала
    использовать_другую_карту()
    
except НетМест:
    # Если нет свободных мест
    посмотреть_другую_дату()
    
else:
    # Если покупка прошла успешно
    порадоваться_и_сохранить_билеты()
    
finally:
    # В любом случае
    закрыть_сайт_авиакомпании()
```

---

## **Ошибки в Python: виды и решения**

Сегодня мы углубимся в подробности ошибок , которые может выводить Python. Python также как и любой язык обладает некоторыми особенностями при выводе ошибок, что позволяет решать их быстрее и с помощью меньших временных затрат.

**Вот** несколько из самых распространенных ошибок:

### **1. Синтаксические ошибки (SyntaxError)**
**Что это:** Нарушение правил языка Python. Программа не запустится вообще.

**Примеры и решения:**
```python
# ❌ Незакрытая кавычка
print("Привет)  # SyntaxError: EOL while scanning string literal
# ✅ Решение: закрыть кавычку
print("Привет")

# ❌ Отсутствующая скобка
if x > 5:  # SyntaxError: invalid syntax
# ✅ Решение: добавить двоеточие и правильно оформить блок
if x > 5:
    print("Больше пяти")
```

**Как исправлять:**
Чтобы исправлять данные ошибки крайне необходимо внимательно читать сообщение об ошибке (всегда важно смотреть описание ошибки иначе вы можете потратить намного больше времени). Также стоит проверять строку, указанную в ошибке, и предыдущие строки. При этом особое внимание уделяйте: скобкам, кавычкам, двоеточиям, отступам

### **2. Исключения (Exceptions)**
**Что это:** Ошибки, возникающие во время выполнения программы.

**Частые исключения и решения:**

#### **ValueError - неправильное значение**
```python
# ❌ Попытка преобразовать нечисловую строку
number = int("abc")  # ValueError: invalid literal for int()
# ✅ Решение: проверять ввод или использовать обработку исключений
try:
    number = int(input("Введите число: "))
except ValueError:
    print("Нужно ввести число!")
```

#### **TypeError - неправильная операция для типа данных**
```python
# ❌ Сложение строки и числа
result = "Возраст: " + 25  # TypeError: can only concatenate str to str
# ✅ Решение: преобразовать тип
result = "Возраст: " + str(25)
```

#### **ZeroDivisionError - деление на ноль**
```python
# ❌ Деление на ноль
result = 10 / 0  # ZeroDivisionError: division by zero
# ✅ Решение: проверять делитель
divisor = 0
if divisor != 0:
    result = 10 / divisor
else:
    print("Деление на ноль невозможно")
```

#### **IndexError - несуществующий индекс**
```python
# ❌ Обращение к несуществующему элементу
items = [1, 2, 3]
print(items[5])  # IndexError: list index out of range
# ✅ Решение: проверять длину списка
index = 5
if index < len(items):
    print(items[index])
else:
    print("Индекс за пределами списка")
```

#### **FileNotFoundError - файл не найден**
```python
# ❌ Попытка открыть несуществующий файл
file = open("несуществующий.txt")  # FileNotFoundError
# ✅ Решение: проверять существование файла или обрабатывать исключение
import os
if os.path.exists("файл.txt"):
    file = open("файл.txt")
else:
    print("Файл не найден")
```

### **3. Логические ошибки**
**Что это:** Программа работает, но выдает неправильный результат.

**Пример и решение:**
```python
# ❌ Неправильный приоритет операций
result = 2 + 3 * 4  # Ожидаем 20, получаем 14
# ✅ Решение: использовать скобки для явного указания порядка
result = (2 + 3) * 4  # Теперь 20

# ❌ Неправильная логика условия
age = 17
if age > 18:  # Ошибка: не включает 18-летних
    print("Совершеннолетний")
# ✅ Решение: правильно формулировать условия
if age >= 18:
    print("Совершеннолетний")
```

**Как находить логические ошибки:**
- Использовать отладку
- Добавлять print() для вывода промежуточных значений
- Тестировать на разных входных данных
- Внимательно проверять алгоритмы

---

## **Обработка исключений с try-except**
Мы должны обрабатывать наши ошибки, чтобы в случае их выявления выводился текст или же какая-то функиця.

### **Базовый синтаксис**
```python
try:
    # Код, который может вызвать исключение
    number = int(input("Введите число: "))
    result = 100 / number
    print(f"Результат: {result}")
except ValueError:
    # Обработка ошибки преобразования типа
    print("Ошибка: нужно ввести число!")
except ZeroDivisionError:
    # Обработка деления на ноль
    print("Ошибка: нельзя делить на ноль!")
```

### **Расширенная обработка с else и finally**
```python
try:
    file = open("data.txt", "r")
    content = file.read()
    number = int(content)
except FileNotFoundError:
    print("Файл не найден!")
except ValueError:
    print("В файле не число!")
else:
    # Выполняется, если исключений не было
    print(f"Успешно прочитано число: {number}")
finally:
    # Выполняется всегда, даже если было исключение
    print("Завершение работы с файлом")
    file.close()  # Важно освободить ресурсы
```

### **Универсальный обработчик исключений**
```python
try:
    # Различные операции
    x = int(input("Введите число: "))
    y = 10 / x
    items = [1, 2, 3]
    print(items[x])
except Exception as e:
    # Перехват всех исключений
    print(f"Произошла ошибка типа {type(e).__name__}: {e}")
```

**Важно:** Использовать универсальный обработчик только когда действительно нужно перехватывать все исключения. В большинстве случаев лучше обрабатывать конкретные типы исключений.

---

## **Полезные советы**

1. **Всегда проверяйте ввод пользователя** - не доверяйте данным извне
2. **Используйте конкретные обработчики исключений** - это делает код понятнее
3. **Освобождайте ресурсы в finally** - особенно файлы и сетевые соединения
4. **Логируйте ошибки** - записывайте в файл или выводите для отладки
5. **Тестируйте на крайних случаях** - пустые значения, нули, очень большие числа

> **Запомните:** Ошибка - это не катастрофа, а возможность сделать программу лучше и надежнее!