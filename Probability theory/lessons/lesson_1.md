# Раздел 1. Элементы комбинаторики

## 1. Введение в теорию вероятностей

**Теория вероятностей** — раздел математики, изучающий закономерности случайных явлений, наблюдаемых при многократном повторении опыта (эксперимента).

Перед тем как изучать данную дисциплину, необходимо изучить ряд понятий для понимания дальнейшего их использования в различных теоремах и формулировках.

**Опыт (эксперимент)** - воспроизведение комплекса условий для наблюдения исследуемого события или явления.

**Случайное событие** — это событие, которое может произойти или не произойти в результате некоторого испытания (подбрасывание монеты, вытягивание карты).

**Вероятность** — это число от 0 до 1, которое показывает, насколько ожидаемо событие.
*   `0` — событие *невозможно* (например, выпадение числа 7 на обычном игральном кубике).
*   `1` — событие *достоверно* (например, выпадение числа от 1 до 6 на том же кубике).

**Классическое определение вероятности** (формула Лапласа):
Вероятность `P` наступления события `A` равна отношению числа благоприятных исходов `m` к общему числу всех *равновозможных* исходов `n`.

$P(A) = m / n$

**Пример:** Какова вероятность вытащить туза из стандартной колоды в 36 карт?
*   Общее число исходов `n = 36` (все карты в колоде).
*   Число благоприятных исходов `m = 4` (4 туза в колоде).
*   **Ответ:** `P = 4 / 36 = 1/9`.

Чтобы считать количество исходов (`m` и `n`), нам и нужна **комбинаторика** — наука о подсчёте количества различных комбинаций из элементов множества.

---

## 2. Упорядоченные выборки (Размещения)

В комбинаторике различают две основные категории выборок: **упорядоченные** (размещения) и **неупорядоченные** (сочетания). Различие между ними заключается в том, важен ли порядок следования элементов в выборке.

**Размещения** — это упорядоченные выборки `k` элементов из некоторого множества, содержащего `n` различных элементов. Порядок следования элементов в размещении важен.

### Размещения без повторений

Элементы в выборке *не могут* повторяться.
Формула для подсчёта числа размещений без повторений из `n` по `k`:

$A_n^k = n! / (n - k)! = n * (n - 1) * ... * (n - k + 1)$

где `n!` — это произведение всех натуральных чисел от 1 до `n`.

**Пример:** Сколькими способами можно распределить 3 призовых места (1-е, 2-е, 3-е) среди 5 участников соревнования?
*   Порядок важен: `{Иван, Пётр, Алексей}` — это не то же самое, что `{Пётр, Иван, Алексей}`.
*   Повторения невозможны (один человек не может занять два места).
*   `n = 5`, `k = 3`.
*   **Ответ:** `A_5^3 = 5! / (5 - 3)! = 5! / 2! = 5 * 4 * 3 = 60` способов.

### Размещения с повторениями

Элементы в выборке *могут* повторяться.
Формула для подсчёта числа размещений с повторениями из `n` по `k`:

$Â_n^k = n^k$

**Пример:** Сколько 4-значных пин-кодов можно составить?
*   Порядок цифр важен (1234 ≠ 4321).
*   Цифры могут повторяться (например, 1111).
*   `n = 10` (цифры от 0 до 9), `k = 4`.
*   **Ответ:** `Â_10^4 = 10^4 = 10 000` пин-кодов.

---

## 3. Перестановки

**Перестановки** — это частный случай размещений, когда `k = n`. То есть мы переставляем местами *все* `n` элементов, имеющихся в множестве. Это все возможные упорядочивания данного множества.

### Перестановки без повторений

Все элементы множества различны.
Формула для числа перестановок без повторений:

$P_n = A_n^n = n!$

**Пример:** Сколькими способами можно расставить 5 книг на полке?
*   Мы используем все 5 книг (`k = n = 5`).
*   Порядок следования важен.
*   **Ответ:** `P_5 = 5! = 1 * 2 * 3 * 4 * 5 = 120` способов.

### Перестановки с повторениями

Если среди `n` элементов есть одинаковые: `n1` элементов одного типа, `n2` другого и т.д., то число уникальных перестановок считается по формуле:

$P_n (n1, n2, ..., nk) = n! / (n1! * n2! * ... * nk!)$

**Пример:** Сколько различных слов (пусть и бессмысленных) можно составить из букв слова "МАМА"?
*   Всего букв `n = 4`.
*   Буква "М" повторяется `n1 = 2` раза.
*   Буква "А" повторяется `n2 = 2` раза.
*   **Ответ:** `P_4 (2, 2) = 4! / (2! * 2!) = 24 / (2 * 2) = 6` слова.
    *   (МАМА, МААМ, ММАА, АММА, АМАМ, ААММ)

---

## 4. Неупорядоченные выборки (Сочетания)

**Сочетания** — это неупорядоченные выборки `k` элементов из множества, содержащего `n` различных элементов. Порядок элементов в сочетании не важен.

### Сочетания без повторений

Элементы в выборке не повторяются.
Формула для подсчёта числа сочетаний без повторений из `n` по `k`:

$C_n^k = \frac{n!}{k!(n - k)!}$

где $\binom{n}{k}$ — биномиальный коэффициент.

**Пример:** Сколькими способами можно выбрать 2 дежурных из 5 человек?
*   Порядок не важен: пара `{Иван, Пётр}` — это то же самое, что `{Пётр, Иван}`.
*   Повторения невозможны (одного человека нельзя выбрать дважды).
*   `n = 5`, `k = 2`.
*   **Ответ:** `C_5^2 = 5! / (2! * (5 - 2)!) = 5! / (2! * 3!) = (5 * 4) / (2 * 1) = 10` способов.

### Сочетания с повторениями

Элементы в выборке могут повторяться.
Формула для подсчёта числа сочетаний с повторениями из `n` по `k`:

$Ĉ_n^k = C_{n + k - 1}^k = \frac{(n + k - 1)!}{k!(n - 1)!}$

**Пример:** В кондитерской продают пирожные 4 видов. Сколькими способами можно купить 6 пирожных?
*   Порядок выбора не важен (важно только количество пирожных каждого вида).
*   Пирожные одного вида неразличимы, и мы можем брать несколько пирожных одного вида.
*   `n = 4` (вида), `k = 6` (пирожных).
*   **Ответ:** `Ĉ_4^6 = C_{4 + 6 - 1}^6 = C_9^6 = 9! / (6! * 3!) = 84` способа.

---

### Сводная таблица

| Комбинаторная конфигурация | Порядок важен? | Повторения? | Формула |
| :--- | :---: | :---: | :--- |
| **Размещения без повторений** | Да | Нет | `A_n^k = n!/(n-k)!` |
| **Размещения с повторениями** | Да | Да | `Â_n^k = n^k` |
| **Перестановки без повторений** | Да | Нет | `P_n = n!` |
| **Перестановки с повторениями** | Да | Да | `P_n(n1,n2...) = n!/(n1!*n2!*...)` |
| **Сочетания без повторений** | Нет | Нет | `C_n^k = n!/(k!(n-k)!)` |
| **Сочетания с повторениями** | Нет | Да | `Ĉ_n^k = C_{n+k-1}^k` |